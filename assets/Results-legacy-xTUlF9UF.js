System.register(["./ResultsParser-legacy-DYUckBBS.js","./index-legacy-lHRQRcjI.js"],function(e,a){"use strict";var t,n,o,r,s,l,i,d,c,u,f,b,g,p,v,h,m,y,w,x;return{setters:[e=>{t=e.u,n=e.R},e=>{o=e._,r=e.i,s=e.m,l=e.r,i=e.a,d=e.o,c=e.d,u=e.b,f=e.e,b=e.f,g=e.D,p=e.w,v=e.g,h=e.t,m=e.a3,y=e.F,w=e.C,x=e.A}],execute:function(){var a=document.createElement("style");a.textContent="@keyframes pulse-icon-2bf205b8{0%,to{stroke:#9f7aea;filter:url(#neon-glow)}50%{stroke:#8872a7;filter:url(#neon-glow)}}.faceIdAnim-figma svg g[data-v-2bf205b8]{animation:pulse-icon-2bf205b8 3s ease-in-out infinite;filter:url(#neon-glow)}svg[data-v-2bf205b8]{width:15vh;color:#9f7aea}.faceIdAnim-figma[data-v-2bf205b8]{display:flex;justify-content:center}.cards[data-v-2bf205b8]{display:flex;justify-content:center;margin-top:50px}.scan-container[data-v-2bf205b8]{position:relative;display:inline-block;border-radius:25px;overflow:hidden}.scan-overlay[data-v-2bf205b8]{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;mix-blend-mode:screen}.scan-grid[data-v-2bf205b8]{position:absolute;top:0;right:0;bottom:0;left:0;background-image:linear-gradient(rgba(147,71,255,.06) 1px,transparent 1px),linear-gradient(90deg,rgba(147,71,255,.06) 1px,transparent 1px);background-size:36px 36px,36px 36px;opacity:.9}.scan-line[data-v-2bf205b8]{position:absolute;left:-10%;width:120%;height:10%;transform:translateY(-140%);background:linear-gradient(90deg,rgba(147,71,255,0),rgba(147,71,255,.12),rgba(255,255,255,.9),rgba(147,71,255,.18),rgba(147,71,255,0));filter:drop-shadow(0 0 18px rgba(147,71,255,.9));animation:scan-move-2bf205b8 2.8s linear infinite}.scan-glow[data-v-2bf205b8]{position:absolute;left:0;right:0;height:100%;top:0;background:radial-gradient(ellipse at center,rgba(147,71,255,.06) 0%,rgba(147,71,255,.02) 30%,transparent 60%);mix-blend-mode:screen;pointer-events:none}@keyframes scan-move-2bf205b8{0%{transform:translateY(-140%);opacity:0}8%{opacity:.9}50%{transform:translateY(1020%);opacity:1}60%{transform:translateY(1020%)}92%{opacity:.9}to{transform:translateY(-140%);opacity:0}}.large.center[data-v-2bf205b8]{animation:pulse-text-2bf205b8 3s ease-in-out infinite}@keyframes pulse-text-2bf205b8{0%,to{color:#9f7aea;text-shadow:0 0 0 rgba(159,122,234,0)}50%{color:#d6bbfc;text-shadow:0 0 18px rgba(147,71,255,.45)}}\n/*$vite$:1*/",document.head.appendChild(a);const k={class:"wrapper"},M={class:"cards"},C={class:"card front"},S={class:"scan-container","aria-hidden":"false"},P={key:0,class:"scan-overlay","aria-hidden":"true"},_={href:"TestLooksMaxing/"},V={href:"TestLooksMaxing/"},j="https://text.pollinations.ai/openai";e("default",o({__name:"Results",props:["data"],setup(e){const a=e,o=r();async function N(e){const a=new FormData,t=e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");a.append("image",t);try{const e=await fetch("https://api.imgbb.com/1/upload?key=83ea34a0ab0d41e5d26b68b74c392655",{method:"POST",body:a}),t=await e.json();if(t.success&&t.data&&t.data.url)return t.data.url;throw H(),new Error("Image upload failed")}catch(n){throw H(),console.error("Image upload error:",n),n}}async function I(){try{const e=await fetch("https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/HumanValidationPromt.txt");return await e.text()}catch(e){return console.log("getValidationPromt with an error",e),null}}async function T(){try{const e=await fetch("https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/AnalyticsPromt.txt");return await e.text()}catch(e){return console.log("getValidationPromt with an error",e),null}}const E=async(e,a,t)=>({model:"openai",messages:[{role:"system",content:await t()},{role:"user",content:JSON.stringify({frontPhoto:e,profilePhoto:a})}],reasoning_effort:"high"}),A=r(""),D=r("");async function O(){o.value="Scanning";try{var e,t;const[n,r]=await Promise.all([N(a.data.front),N(a.data.side)]);o.value="Validating";const s=await E(n,r,I);console.log("Sending validation request:",s);const l=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await l.json(),d=null==i||null===(e=i.choices)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.message)||void 0===e?void 0:e.content;if(console.log("Validation response:",d),!d||d.toLowerCase().includes("error")){const e=await JSON.parse(d);return D.value=e[0].Error.PhotoError.reason,console.log("Validation failed or returned error"),o.value="ValidationError",void H()}o.value="Fetching";const c=await E(n,r,T);console.log("Sending max request:",c);const u=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),f=await u.json(),b=null==f||null===(t=f.choices)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.message)||void 0===t?void 0:t.content;if(console.log("MaxPrompt response:",b),b){o.value="Done";const e=await JSON.parse(b);A.value=e,async function(e,a,t){var n,o,r;await w();const s=Array.isArray(null==G?void 0:G.value)?x(G.value):[],l={id:Date.now(),res:null!==(n=e.value)&&void 0!==n?n:e,firstP:null!==(o=a.value)&&void 0!==o?o:a,secondP:null!==(r=t.value)&&void 0!==r?r:t},i=[...s,l];await L(i),console.log("âœ… Saved successfully:",i)}(e,a.data.front,a.data.side)}else console.log("No content returned from MaxPrompt"),H(),o.value="Error"}catch(n){o.value="Error",H(),console.error("Request error:",n)}}const{data:G,set:L}=t("res",[]);s(()=>{O()});const R=r(null),H=()=>{var e;null===(e=R.value)||void 0===e||e.open()},J=r(null);return(a,t)=>{const r=l("MaxText"),s=l("MaxImage"),w=l("MaxButton"),x=l("MaxModal");return d(),i(y,null,[c("div",k,[t[3]||(t[3]=g('<div class="faceIdAnim-figma" id="faceIdIcon" data-v-2bf205b8><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2bf205b8><defs data-v-2bf205b8><filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-2bf205b8><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" data-v-2bf205b8></feGaussianBlur><feMerge data-v-2bf205b8><feMergeNode in="blur" data-v-2bf205b8></feMergeNode><feMergeNode in="SourceGraphic" data-v-2bf205b8></feMergeNode></feMerge></filter></defs><g filter="url(#neon-glow)" stroke="#00e08f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2bf205b8><path class="corner corner-tl" d="M8 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V8" data-v-2bf205b8></path><path class="corner corner-bl" d="M8 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V16" data-v-2bf205b8></path><path class="corner corner-tr" d="M21 8V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H16" data-v-2bf205b8></path><path class="corner corner-br" d="M21 16V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H16" data-v-2bf205b8></path><path class="face-eye eye-left" d="M7.5 8V9.5" data-v-2bf205b8></path><path class="face-eye eye-right" d="M16.5 8V9.5" data-v-2bf205b8></path><path class="face-nose" d="M11 12.6001C11.8 12.6001 12.5 11.9001 12.5 11.1001V8" data-v-2bf205b8></path><path class="face-mouth" d="M15.2002 15.2C13.4002 17 10.5002 17 8.7002 15.2" data-v-2bf205b8></path></g></svg></div>',1)),b(r,{class:"large center"},{default:p(()=>[v(h(o.value)+" your face...",1)]),_:1}),"Done"!==o.value?(d(),u(r,{key:0,class:"description center"},{default:p(()=>[...t[1]||(t[1]=[v("This should only take a minute",-1)])]),_:1})):f("",!0),c("div",M,[c("div",C,[c("div",S,[b(s,{img:e.data.front,borderRadius:25},null,8,["img"]),"Done"==!o.value?(d(),i("div",P,[...t[2]||(t[2]=[c("div",{class:"scan-line",role:"presentation"},null,-1),c("div",{class:"scan-grid",role:"presentation"},null,-1),c("div",{class:"scan-glow",role:"presentation"},null,-1)])])):f("",!0)])])])]),t[8]||(t[8]=c("br",null,null,-1)),"Done"==o.value?(d(),u(w,{key:0,size:250,onClick:t[0]||(t[0]=e=>{var a;null===(a=J.value)||void 0===a||a.open()})},{default:p(()=>[...t[4]||(t[4]=[v("See results",-1)])]),_:1})):f("",!0),b(x,{ref_key:"resultModal",ref:J},{default:p(()=>[b(n,{results:A.value},null,8,["results"]),c("a",_,[b(w,null,{default:p(()=>[...t[5]||(t[5]=[v("Try againðŸ”",-1)])]),_:1})])]),_:1},512),b(m,{ref_key:"modalError",ref:R,title:"Error"},{default:p(()=>[b(r,{class:"large center"},{default:p(()=>[v(h(D.value?"ErrorâŒ":"Connection to the server failedâŒ"),1)]),_:1}),b(r,{class:"description center"},{default:p(()=>[v(h(D.value?D.value:"Please check your network connection and try againðŸ›œ"),1)]),_:1}),t[7]||(t[7]=c("br",null,null,-1)),c("a",V,[b(w,{size:"250"},{default:p(()=>[...t[6]||(t[6]=[c("a",{href:"TestLooksMaxing/"},"Retry",-1)])]),_:1})])]),_:1},512)],64)}}},[["__scopeId","data-v-2bf205b8"]]))}}});
