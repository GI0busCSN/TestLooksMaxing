import{_ as q,j as v,k as F,r as C,a as m,o as p,b as a,f as z,l as X,d as n,s as $,w as s,e as i,t as d,F as T,i as j,X as K,h as Y}from"./index-DHgHVS3C.js";const Q={class:"wrapper"},W={class:"cards"},Z={class:"card front"},ee={class:"scan-container","aria-hidden":"false"},te={class:"rating"},ae={href:"TestLooksMaxing/"},oe={href:"TestLooksMaxing/"},A="https://text.pollinations.ai/openai",ne="25cd5cd35f3e85431a2f1e96904d24f7",se="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/HumanValidationPromt.txt",re="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/AnalyticsPromt.txt",le={__name:"Results",props:["data"],setup(V){const h=V,u=v(),E="https://api.imgbb.com/1/upload?key=".concat(ne);async function I(t){const e=new FormData,o=t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");e.append("image",o);try{const l=await(await fetch(E,{method:"POST",body:e})).json();if(l.success&&l.data&&l.data.url)return l.data.url;throw g(),new Error("Image upload failed")}catch(r){throw g(),console.error("Image upload error:",r),r}}async function D(){try{return await(await fetch(se)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}async function G(){try{return await(await fetch(re)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}const N=async(t,e,o)=>({model:"openai",messages:[{role:"system",content:await o()},{role:"user",content:JSON.stringify({frontPhoto:t,profilePhoto:e})}],temperature:1,stream:!1,reasoning_effort:"high"}),R=v(""),_=v("");async function U(){var t,e,o,r,l,M;u.value="Scanning";try{const[c,y]=await Promise.all([I(h.data.front),I(h.data.side)]),f=await N(c,y,D);console.log("Sending validation request:",f);const b=await(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json(),w=(o=(e=(t=b==null?void 0:b.choices)==null?void 0:t[0])==null?void 0:e.message)==null?void 0:o.content;if(console.log("Validation response:",w),!w||w.toLowerCase().includes("error")){const x=await JSON.parse(w);_.value=x[0].Error.PhotoError.reason,console.log("Validation failed or returned error"),u.value="ValidationError",g();return}const O=await N(c,y,G);console.log("Sending max request:",O);const P=await(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json(),S=(M=(l=(r=P==null?void 0:P.choices)==null?void 0:r[0])==null?void 0:l.message)==null?void 0:M.content;if(console.log("MaxPrompt response:",S),S){u.value="Done";const x=await JSON.parse(S);R.value=x,H(x,h.data.front,h.data.side)}else console.log("No content returned from MaxPrompt"),g(),u.value="Error"}catch(c){u.value="Error",g(),console.error("Request error:",c)}}function H(t,e,o){const r=Y("res",[]);r.value.push({id:Date.now(),res:t,firstP:e,secondP:o}),console.log(r.value)}F(()=>{U()});const B=v(null),g=()=>{var t;(t=B.value)==null||t.open()},L=v(null),J=()=>{var t;(t=L.value)==null||t.open()};return(t,e)=>{const o=C("MaxText"),r=C("MaxImage"),l=C("MaxButton"),M=C("MaxModal");return p(),m(T,null,[a("div",Q,[e[3]||(e[3]=$('<div class="faceIdAnim-figma" id="faceIdIcon" data-v-779caf67><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-779caf67><defs data-v-779caf67><filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-779caf67><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" data-v-779caf67></feGaussianBlur><feMerge data-v-779caf67><feMergeNode in="blur" data-v-779caf67></feMergeNode><feMergeNode in="SourceGraphic" data-v-779caf67></feMergeNode></feMerge></filter></defs><g filter="url(#neon-glow)" stroke="#00e08f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-779caf67><path class="corner corner-tl" d="M8 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V8" data-v-779caf67></path><path class="corner corner-bl" d="M8 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V16" data-v-779caf67></path><path class="corner corner-tr" d="M21 8V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H16" data-v-779caf67></path><path class="corner corner-br" d="M21 16V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H16" data-v-779caf67></path><path class="face-eye eye-left" d="M7.5 8V9.5" data-v-779caf67></path><path class="face-eye eye-right" d="M16.5 8V9.5" data-v-779caf67></path><path class="face-nose" d="M11 12.6001C11.8 12.6001 12.5 11.9001 12.5 11.1001V8" data-v-779caf67></path><path class="face-mouth" d="M15.2002 15.2C13.4002 17 10.5002 17 8.7002 15.2" data-v-779caf67></path></g></svg></div>',1)),n(o,{class:"large center"},{default:s(()=>[i(d(u.value)+" your face...",1)]),_:1}),n(o,{class:"description center"},{default:s(()=>[...e[1]||(e[1]=[i("This should only take a minute",-1)])]),_:1}),a("div",W,[a("div",Z,[a("div",ee,[n(r,{img:V.data.front,borderRadius:25},null,8,["img"]),e[2]||(e[2]=a("div",{class:"scan-overlay","aria-hidden":"true"},[a("div",{class:"scan-line",role:"presentation"}),a("div",{class:"scan-grid",role:"presentation"}),a("div",{class:"scan-glow",role:"presentation"})],-1))])])])]),e[11]||(e[11]=a("br",null,null,-1)),u.value=="Done"?(p(),z(l,{key:0,size:450,onClick:e[0]||(e[0]=c=>J())},{default:s(()=>[...e[4]||(e[4]=[i("See results",-1)])]),_:1})):X("",!0),n(M,{ref_key:"resultModal",ref:L},{default:s(()=>[a("ul",null,[(p(!0),m(T,null,j(R.value,(c,y)=>(p(),m("section",{key:y},[(p(!0),m(T,null,j(c.features,(f,k)=>(p(),m("div",{class:"content",key:k},[a("section",null,[n(o,{class:"icon"},{default:s(()=>[i(d(f.emoji),1)]),_:2},1024),a("li",null,[a("strong",null,d(k),1),i(": "+d(f.trait),1)]),a("div",te,[n(o,null,{default:s(()=>[i("⭐ "+d(f.score),1)]),_:2},1024)])]),e[5]||(e[5]=a("div",{class:"divider-thick"},null,-1))]))),128)),e[6]||(e[6]=a("div",{class:"divider-thick"},null,-1)),n(o,null,{default:s(()=>[i("Average Score: "+d(c.averageScore),1)]),_:2},1024),n(o,null,{default:s(()=>[i("Training Type: "+d(c.typeOfTraining.TrainingId),1)]),_:2},1024)]))),128)),a("a",ae,[n(l,null,{default:s(()=>[...e[7]||(e[7]=[i("Try again🔁",-1)])]),_:1})])])]),_:1},512),n(K,{ref_key:"modalError",ref:B,title:"Failed Connection"},{default:s(()=>[n(o,{class:"large center"},{default:s(()=>[...e[8]||(e[8]=[i(" Connection to the server failed❌ ",-1)])]),_:1}),n(o,{class:"description center"},{default:s(()=>[i(d(_.value?_.value:"Please check your network connection and try again🛜"),1)]),_:1}),e[10]||(e[10]=a("br",null,null,-1)),a("a",oe,[n(l,{size:"250"},{default:s(()=>[...e[9]||(e[9]=[a("a",{href:"TestLooksMaxing/"},"Retry",-1)])]),_:1})])]),_:1},512)],64)}}},de=q(le,[["__scopeId","data-v-779caf67"]]);export{de as default};
