import{_ as G,i as d,j as U,r as g,a as D,o as N,b as a,f as q,k as H,d as r,q as F,w as l,e as u,t as S,V as J,F as z}from"./index-DqhmHdY8.js";const $={class:"wrapper"},K={class:"cards"},X={class:"card front"},Y={class:"scan-container","aria-hidden":"false"},Q={href:"#"},B="https://text.pollinations.ai/openai",W="25cd5cd35f3e85431a2f1e96904d24f7",Z="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/HumanValidationPromt.txt",ee="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/AnalyticsPromt.txt",te={__name:"Results",props:["data"],setup(w){const x=w,c=d(),T="https://api.imgbb.com/1/upload?key=".concat(W);async function C(t){const e=new FormData,o=t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");e.append("image",o);try{const n=await(await fetch(T,{method:"POST",body:e})).json();if(n.success&&n.data&&n.data.url)return n.data.url;throw new Error("Image upload failed")}catch(s){throw console.error("Image upload error:",s),s}}async function O(){try{return await(await fetch(Z)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}async function A(){try{return await(await fetch(ee)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}const _=async(t,e,o)=>({model:"openai",messages:[{role:"system",content:await o()},{role:"user",content:JSON.stringify({frontPhoto:t,profilePhoto:e})}],temperature:1,stream:!1,reasoning_effort:"high"}),b=d(""),m=d("");async function E(){var t,e,o,s,n,p;c.value="Scanning";try{const[i,k]=await Promise.all([C(x.data.front),C(x.data.side)]),R=await _(i,k,O);console.log("Sending validation request:",R);const h=await(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json(),f=(o=(e=(t=h==null?void 0:h.choices)==null?void 0:t[0])==null?void 0:e.message)==null?void 0:o.content;if(console.log("Validation response:",f),!f||f.toLowerCase().includes("error")){const L=await JSON.parse(f);m.value=L[0].Error.PhotoError.reason,console.log("Validation failed or returned error"),c.value="ValidationError",v();return}const I=await _(i,k,A);console.log("Sending max request:",I);const M=await(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json(),y=(p=(n=(s=M==null?void 0:M.choices)==null?void 0:s[0])==null?void 0:n.message)==null?void 0:p.content;console.log("MaxPrompt response:",y),y?(c.value="Done",b.value=y):(console.log("No content returned from MaxPrompt"),v(),c.value="Error")}catch(i){c.value="Error",v(),console.error("Request error:",i)}}U(()=>{E()});const P=d(null),v=()=>{var t;(t=P.value)==null||t.open()},V=d(null),j=()=>{var t;(t=V.value)==null||t.open()};return(t,e)=>{const o=g("MaxText"),s=g("MaxImage"),n=g("MaxButton"),p=g("MaxModal");return N(),D(z,null,[a("div",$,[e[4]||(e[4]=F('<div class="faceIdAnim-figma" id="faceIdIcon" data-v-97c424a0><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-97c424a0><defs data-v-97c424a0><filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-97c424a0><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" data-v-97c424a0></feGaussianBlur><feMerge data-v-97c424a0><feMergeNode in="blur" data-v-97c424a0></feMergeNode><feMergeNode in="SourceGraphic" data-v-97c424a0></feMergeNode></feMerge></filter></defs><g filter="url(#neon-glow)" stroke="#00e08f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-97c424a0><path class="corner corner-tl" d="M8 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V8" data-v-97c424a0></path><path class="corner corner-bl" d="M8 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V16" data-v-97c424a0></path><path class="corner corner-tr" d="M21 8V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H16" data-v-97c424a0></path><path class="corner corner-br" d="M21 16V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H16" data-v-97c424a0></path><path class="face-eye eye-left" d="M7.5 8V9.5" data-v-97c424a0></path><path class="face-eye eye-right" d="M16.5 8V9.5" data-v-97c424a0></path><path class="face-nose" d="M11 12.6001C11.8 12.6001 12.5 11.9001 12.5 11.1001V8" data-v-97c424a0></path><path class="face-mouth" d="M15.2002 15.2C13.4002 17 10.5002 17 8.7002 15.2" data-v-97c424a0></path></g></svg></div>',1)),r(o,{class:"large center"},{default:l(()=>[...e[1]||(e[1]=[u("Analyzing your face...",-1)])]),_:1}),r(o,{class:"description center"},{default:l(()=>[...e[2]||(e[2]=[u("This should only take a minute",-1)])]),_:1}),a("div",K,[a("div",X,[a("div",Y,[r(s,{img:w.data.front,borderRadius:25},null,8,["img"]),e[3]||(e[3]=a("div",{class:"scan-overlay","aria-hidden":"true"},[a("div",{class:"scan-line",role:"presentation"}),a("div",{class:"scan-grid",role:"presentation"}),a("div",{class:"scan-glow",role:"presentation"})],-1))])])])]),e[9]||(e[9]=a("br",null,null,-1)),c.value=="Done"?(N(),q(n,{key:0,size:450,onClick:e[0]||(e[0]=i=>j())},{default:l(()=>[...e[5]||(e[5]=[u("See results",-1)])]),_:1})):H("",!0),r(p,{ref_key:"resultModal",ref:V},{default:l(()=>[a("h1",null,S(b.value),1)]),_:1},512),r(J,{ref_key:"modalError",ref:P,title:"Failed Connection"},{default:l(()=>[r(o,{class:"large center"},{default:l(()=>[...e[6]||(e[6]=[u(" Connection to the server failedâŒ ",-1)])]),_:1}),r(o,{class:"description center"},{default:l(()=>[u(S(m.value?m.value:"Please check your network connection and try againðŸ›œ"),1)]),_:1}),e[8]||(e[8]=a("br",null,null,-1)),a("a",Q,[r(n,{size:"250"},{default:l(()=>[...e[7]||(e[7]=[a("a",{href:"#"},"Retry",-1)])]),_:1})])]),_:1},512)],64)}}},se=G(te,[["__scopeId","data-v-97c424a0"]]);export{se as default};
