System.register(["./index-legacy-CjDqxiMi.js"],function(e,t){"use strict";var n,r,o,a,u;return{setters:[e=>{n=e.v,r=e.i,o=e.a4,a=e.a5,u=e.A}],execute:function(){function t(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function i(e,n){let r;return(o,a)=>(()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(n),r=t(o),r.then(e=>{e.onclose=()=>r=void 0},()=>{}),r})().then(e=>a(e.transaction(n,o).objectStore(n)))}let c;function s(){return c||(c=i("keyval-store","keyval")),c}e("u",function(e,i,c={}){const{flush:l="pre",deep:d=!0,shallow:f=!1,onError:w=e=>{console.error(e)},writeDefaults:v=!0,serializer:y={read:e=>e,write:e=>e}}=c,h=n(!1),p=(f?n:r)(i),g=o(i);async function m(){try{if(null==p.value)await function(e,n=s()){return n("readwrite",n=>(n.delete(e),t(n.transaction)))}(e);else{const n=u(p.value),r=y.write(n);await function(e,n,r=s()){return r("readwrite",r=>new Promise((o,a)=>{r.get(e).onsuccess=function(){try{r.put(n(this.result),e),o(t(r.transaction))}catch(u){a(u)}}}))}(e,()=>r)}}catch(n){w(n)}}!async function(){try{const n=await function(e,n=s()){return n("readonly",n=>t(n.get(e)))}(e);void 0===n?null!=g&&v&&await function(e,n,r=s()){return r("readwrite",r=>(r.put(n,e),t(r.transaction)))}(e,y.write(g)):p.value=y.read(n)}catch(n){w(n)}h.value=!0}();const{pause:b,resume:j}=a(p,()=>m(),{flush:l,deep:d});return{set:async function(e){b(),p.value=e,await m(),j()},isFinished:h,data:p}})}}});
