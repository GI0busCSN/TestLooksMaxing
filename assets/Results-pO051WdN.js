import{_ as H,i as v,j as J,r as x,a as m,o as p,b as t,f as F,k as z,d as n,q as $,w as s,e as l,t as c,F as T,h as j,V as K}from"./index-DiXKG0lg.js";const X={class:"wrapper"},Y={class:"cards"},Q={class:"card front"},W={class:"scan-container","aria-hidden":"false"},Z={class:"rating"},ee={href:"TestLooksMaxing/"},te={href:"TestLooksMaxing/"},A="https://text.pollinations.ai/openai",ae="25cd5cd35f3e85431a2f1e96904d24f7",oe="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/HumanValidationPromt.txt",ne="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/AnalyticsPromt.txt",se={__name:"Results",props:["data"],setup(V){const S=V,u=v(),E="https://api.imgbb.com/1/upload?key=".concat(ae);async function I(a){const e=new FormData,o=a.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");e.append("image",o);try{const r=await(await fetch(E,{method:"POST",body:e})).json();if(r.success&&r.data&&r.data.url)return r.data.url;throw g(),new Error("Image upload failed")}catch(d){throw g(),console.error("Image upload error:",d),d}}async function G(){try{return await(await fetch(oe)).text()}catch(a){return console.log("getValidationPromt with an error",a),null}}async function U(){try{return await(await fetch(ne)).text()}catch(a){return console.log("getValidationPromt with an error",a),null}}const N=async(a,e,o)=>({model:"openai",messages:[{role:"system",content:await o()},{role:"user",content:JSON.stringify({frontPhoto:a,profilePhoto:e})}],temperature:1,stream:!1,reasoning_effort:"high"}),R=v(""),b=v("");async function D(){var a,e,o,d,r,h;u.value="Scanning";try{const[i,M]=await Promise.all([I(S.data.front),I(S.data.side)]),f=await N(i,M,G);console.log("Sending validation request:",f);const C=await(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json(),y=(o=(e=(a=C==null?void 0:C.choices)==null?void 0:a[0])==null?void 0:e.message)==null?void 0:o.content;if(console.log("Validation response:",y),!y||y.toLowerCase().includes("error")){const P=await JSON.parse(y);b.value=P[0].Error.PhotoError.reason,console.log("Validation failed or returned error"),u.value="ValidationError",g();return}const O=await N(i,M,U);console.log("Sending max request:",O);const _=await(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json(),k=(h=(r=(d=_==null?void 0:_.choices)==null?void 0:d[0])==null?void 0:r.message)==null?void 0:h.content;if(console.log("MaxPrompt response:",k),k){u.value="Done";const P=await JSON.parse(k);R.value=P}else console.log("No content returned from MaxPrompt"),g(),u.value="Error"}catch(i){u.value="Error",g(),console.error("Request error:",i)}}J(()=>{D()});const B=v(null),g=()=>{var a;(a=B.value)==null||a.open()},L=v(null),q=()=>{var a;(a=L.value)==null||a.open()};return(a,e)=>{const o=x("MaxText"),d=x("MaxImage"),r=x("MaxButton"),h=x("MaxModal");return p(),m(T,null,[t("div",X,[e[3]||(e[3]=$('<div class="faceIdAnim-figma" id="faceIdIcon" data-v-9b4377fd><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-9b4377fd><defs data-v-9b4377fd><filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-9b4377fd><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" data-v-9b4377fd></feGaussianBlur><feMerge data-v-9b4377fd><feMergeNode in="blur" data-v-9b4377fd></feMergeNode><feMergeNode in="SourceGraphic" data-v-9b4377fd></feMergeNode></feMerge></filter></defs><g filter="url(#neon-glow)" stroke="#00e08f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-9b4377fd><path class="corner corner-tl" d="M8 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V8" data-v-9b4377fd></path><path class="corner corner-bl" d="M8 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V16" data-v-9b4377fd></path><path class="corner corner-tr" d="M21 8V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H16" data-v-9b4377fd></path><path class="corner corner-br" d="M21 16V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H16" data-v-9b4377fd></path><path class="face-eye eye-left" d="M7.5 8V9.5" data-v-9b4377fd></path><path class="face-eye eye-right" d="M16.5 8V9.5" data-v-9b4377fd></path><path class="face-nose" d="M11 12.6001C11.8 12.6001 12.5 11.9001 12.5 11.1001V8" data-v-9b4377fd></path><path class="face-mouth" d="M15.2002 15.2C13.4002 17 10.5002 17 8.7002 15.2" data-v-9b4377fd></path></g></svg></div>',1)),n(o,{class:"large center"},{default:s(()=>[l(c(u.value)+" your face...",1)]),_:1}),n(o,{class:"description center"},{default:s(()=>[...e[1]||(e[1]=[l("This should only take a minute",-1)])]),_:1}),t("div",Y,[t("div",Q,[t("div",W,[n(d,{img:V.data.front,borderRadius:25},null,8,["img"]),e[2]||(e[2]=t("div",{class:"scan-overlay","aria-hidden":"true"},[t("div",{class:"scan-line",role:"presentation"}),t("div",{class:"scan-grid",role:"presentation"}),t("div",{class:"scan-glow",role:"presentation"})],-1))])])])]),e[11]||(e[11]=t("br",null,null,-1)),u.value=="Done"?(p(),F(r,{key:0,size:450,onClick:e[0]||(e[0]=i=>q())},{default:s(()=>[...e[4]||(e[4]=[l("See results",-1)])]),_:1})):z("",!0),n(h,{ref_key:"resultModal",ref:L},{default:s(()=>[t("ul",null,[(p(!0),m(T,null,j(R.value,(i,M)=>(p(),m("section",{key:M},[(p(!0),m(T,null,j(i.features,(f,w)=>(p(),m("div",{class:"content",key:w},[t("section",null,[n(o,{class:"icon"},{default:s(()=>[l(c(f.emoji),1)]),_:2},1024),t("li",null,[t("strong",null,c(w),1),l(": "+c(f.trait),1)]),t("div",Z,[n(o,null,{default:s(()=>[l("â­ "+c(f.score),1)]),_:2},1024)])]),e[5]||(e[5]=t("div",{class:"divider-thick"},null,-1))]))),128)),e[6]||(e[6]=t("div",{class:"divider-thick"},null,-1)),n(o,null,{default:s(()=>[l("Average Score: "+c(i.averageScore),1)]),_:2},1024),n(o,null,{default:s(()=>[l("Training Type: "+c(i.typeOfTraining.TrainingId),1)]),_:2},1024)]))),128)),t("a",ee,[n(r,null,{default:s(()=>[...e[7]||(e[7]=[l("Try againðŸ”",-1)])]),_:1})])])]),_:1},512),n(K,{ref_key:"modalError",ref:B,title:"Failed Connection"},{default:s(()=>[n(o,{class:"large center"},{default:s(()=>[...e[8]||(e[8]=[l(" Connection to the server failedâŒ ",-1)])]),_:1}),n(o,{class:"description center"},{default:s(()=>[l(c(b.value?b.value:"Please check your network connection and try againðŸ›œ"),1)]),_:1}),e[10]||(e[10]=t("br",null,null,-1)),t("a",te,[n(r,{size:"250"},{default:s(()=>[...e[9]||(e[9]=[t("a",{href:"TestLooksMaxing/"},"Retry",-1)])]),_:1})])]),_:1},512)],64)}}},ie=H(se,[["__scopeId","data-v-9b4377fd"]]);export{ie as default};
