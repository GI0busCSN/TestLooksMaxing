import{_ as G,i as u,j as U,r as m,a as D,o as N,b as a,f as q,k as H,d as r,q as F,w as l,e as p,t as S,V as J,F as z}from"./index-BzVriSiW.js";const $={class:"wrapper"},K={class:"cards"},X={class:"card front"},Y={class:"scan-container","aria-hidden":"false"},Q={href:"TestLooksMaxing/"},B="https://text.pollinations.ai/openai",W="25cd5cd35f3e85431a2f1e96904d24f7",Z="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/HumanValidationPromt.txt",ee="https://raw.githubusercontent.com/GI0busCSN/LooksMax-Articles/refs/heads/main/AnalyticsPromt.txt",te={__name:"Results",props:["data"],setup(x){const y=x,d=u(),T="https://api.imgbb.com/1/upload?key=".concat(W);async function w(t){const e=new FormData,o=t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");e.append("image",o);try{const n=await(await fetch(T,{method:"POST",body:e})).json();if(n.success&&n.data&&n.data.url)return n.data.url;throw i(),new Error("Image upload failed")}catch(s){throw i(),console.error("Image upload error:",s),s}}async function L(){try{return await(await fetch(Z)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}async function O(){try{return await(await fetch(ee)).text()}catch(t){return console.log("getValidationPromt with an error",t),null}}const C=async(t,e,o)=>({model:"openai",messages:[{role:"system",content:await o()},{role:"user",content:JSON.stringify({frontPhoto:t,profilePhoto:e})}],temperature:1,stream:!1,reasoning_effort:"high"}),_=u(""),b=u("");async function A(){var t,e,o,s,n,f;d.value="Scanning";try{const[c,k]=await Promise.all([w(y.data.front),w(y.data.side)]),R=await C(c,k,L);console.log("Sending validation request:",R);const v=await(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json(),g=(o=(e=(t=v==null?void 0:v.choices)==null?void 0:t[0])==null?void 0:e.message)==null?void 0:o.content;if(console.log("Validation response:",g),!g||g.toLowerCase().includes("error")){const j=await JSON.parse(g);b.value=j[0].Error.PhotoError.reason,console.log("Validation failed or returned error"),d.value="ValidationError",i();return}const I=await C(c,k,O);console.log("Sending max request:",I);const h=await(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json(),M=(f=(n=(s=h==null?void 0:h.choices)==null?void 0:s[0])==null?void 0:n.message)==null?void 0:f.content;console.log("MaxPrompt response:",M),M?(d.value="Done",_.value=M):(console.log("No content returned from MaxPrompt"),i(),d.value="Error")}catch(c){d.value="Error",i(),console.error("Request error:",c)}}U(()=>{A()});const P=u(null),i=()=>{var t;(t=P.value)==null||t.open()},V=u(null),E=()=>{var t;(t=V.value)==null||t.open()};return(t,e)=>{const o=m("MaxText"),s=m("MaxImage"),n=m("MaxButton"),f=m("MaxModal");return N(),D(z,null,[a("div",$,[e[4]||(e[4]=F('<div class="faceIdAnim-figma" id="faceIdIcon" data-v-200db4cb><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-200db4cb><defs data-v-200db4cb><filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%" data-v-200db4cb><feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" data-v-200db4cb></feGaussianBlur><feMerge data-v-200db4cb><feMergeNode in="blur" data-v-200db4cb></feMergeNode><feMergeNode in="SourceGraphic" data-v-200db4cb></feMergeNode></feMerge></filter></defs><g filter="url(#neon-glow)" stroke="#00e08f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-200db4cb><path class="corner corner-tl" d="M8 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V8" data-v-200db4cb></path><path class="corner corner-bl" d="M8 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V16" data-v-200db4cb></path><path class="corner corner-tr" d="M21 8V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H16" data-v-200db4cb></path><path class="corner corner-br" d="M21 16V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H16" data-v-200db4cb></path><path class="face-eye eye-left" d="M7.5 8V9.5" data-v-200db4cb></path><path class="face-eye eye-right" d="M16.5 8V9.5" data-v-200db4cb></path><path class="face-nose" d="M11 12.6001C11.8 12.6001 12.5 11.9001 12.5 11.1001V8" data-v-200db4cb></path><path class="face-mouth" d="M15.2002 15.2C13.4002 17 10.5002 17 8.7002 15.2" data-v-200db4cb></path></g></svg></div>',1)),r(o,{class:"large center"},{default:l(()=>[...e[1]||(e[1]=[p("Analyzing your face...",-1)])]),_:1}),r(o,{class:"description center"},{default:l(()=>[...e[2]||(e[2]=[p("This should only take a minute",-1)])]),_:1}),a("div",K,[a("div",X,[a("div",Y,[r(s,{img:x.data.front,borderRadius:25},null,8,["img"]),e[3]||(e[3]=a("div",{class:"scan-overlay","aria-hidden":"true"},[a("div",{class:"scan-line",role:"presentation"}),a("div",{class:"scan-grid",role:"presentation"}),a("div",{class:"scan-glow",role:"presentation"})],-1))])])])]),e[9]||(e[9]=a("br",null,null,-1)),d.value=="Done"?(N(),q(n,{key:0,size:450,onClick:e[0]||(e[0]=c=>E())},{default:l(()=>[...e[5]||(e[5]=[p("See results",-1)])]),_:1})):H("",!0),r(f,{ref_key:"resultModal",ref:V},{default:l(()=>[a("h1",null,S(_.value),1)]),_:1},512),r(J,{ref_key:"modalError",ref:P,title:"Failed Connection"},{default:l(()=>[r(o,{class:"large center"},{default:l(()=>[...e[6]||(e[6]=[p(" Connection to the server failed❌ ",-1)])]),_:1}),r(o,{class:"description center"},{default:l(()=>[p(S(b.value?b.value:"Please check your network connection and try again🛜"),1)]),_:1}),e[8]||(e[8]=a("br",null,null,-1)),a("a",Q,[r(n,{size:"250"},{default:l(()=>[...e[7]||(e[7]=[a("a",{href:"TestLooksMaxing/"},"Retry",-1)])]),_:1})])]),_:1},512)],64)}}},se=G(te,[["__scopeId","data-v-200db4cb"]]);export{se as default};
